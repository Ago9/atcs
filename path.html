<!DOCTYPE html>
<meta charset="utf-8">
<html>
<style>
	div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 60px;					
    height: 28px;					
    padding: 2px;				
    font: 12px sans-serif;		
    background: none;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}
</style>	
<body>
<script src="https://d3js.org/d3.v5.min.js"></script>

<div id="my_dataviz"></div>

<script>
   
// set the dimension and margins of the graph
var margin = {top: 30, right: 30, bottom: 70, left: 60},
	width = 600 - margin.left - margin.right,
	height = 600 - margin.top - margin.bottom;

// append the svg object to the body of the page

var svg = d3.select("#my_dataviz")
	.append("svg")
		.attr("width", width + margin.left + margin.right)
		.attr("height", height + margin.top + margin.bottom)
	.append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top +")");

var tool = d3.select("body").append("div")	
    .attr("class", "tooltip")				
    .style("opacity", 0);


var visita = [
//   {"id": "37", "nome": "BurialTradition2", "x": "257", "y": "320" },
//   {"id": "22", "nome": "pottery", "x": "23", "y": "128" },
   {"id": "11", "nome": "prova1", "x": "100", "y": "50" }, 
   {"id": "44", "nome": "prova2", "x": "200", "y": "50" },      
   {"id": "51", "nome": "prova3", "x": "300", "y": "50"},
   {"id": "51", "nome": "prova4", "x": "400", "y": "50"},
   {"id": "51", "nome": "prova3", "x": "500", "y": "50"}

];

console.log(visita)

var r = 6;

svg.selectAll("circle")
	.data(visita)
	.enter()
	.append("circle")
	.attr("class", "circle")
	.attr("cx", function(d){ return d.x;})
	.attr("cy", function(d){ return d.y;})
	.attr("r", r)
    .text(function(d){ return d.nome; })
	.on("mouseover", function(d,i){
		d3.select(this)
			.attr("fill","orange")
			.attr("r", r*1.5);

		tool.transition()		
            .duration(200)		
            .style("opacity", .9)	

		tool.html(d.nome + "<br/>")	
            .style("left", (d3.event.pageX) + "px")		
            .style("top", (d3.event.pageY - 28) + "px");	
        })			

	.on("mouseout", function(d,i){
		d3.select(this)
			.attr("fill","black")
			.attr("r", r);
		tool.transition()		
            .duration(200)		
            .style("opacity", 0)	
	});


let line = d3.line()
    .x(d=> d.x)
    .y(d=> d.y);

svg.append("path")
    .datum(visita)
    .attr("class", "path")
    .attr("d", line)
    .attr("stroke-width", "2.5px")
    .attr("stroke", "black")
    .attr("fill", "none")
    .attr("opacity", 0.5)


</script>

</body>
</html> 